<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Q & A Flashcards</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CHXHM9CZKM"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-CHXHM9CZKM");
    </script>

    <!-- Favicons -->
    <link href="/img/favicon.png" rel="icon" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      :root {
        --primary-color: #2c3e50;
        --accent-color: #3498db;
        --card-height: 320px;
        --card-width: 500px;
        --bg-color: #f0f2f5;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-color);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
      }

      /* --- Wrapper & Progress --- */
      .flashcard-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 600px;
      }

      .progress-container {
        width: 100%;
        margin-bottom: 25px;
        text-align: center;
        color: #666;
        font-weight: 600;
      }

      .progress-bar-bg {
        width: 100%;
        height: 8px;
        background: #dfe6e9;
        border-radius: 4px;
        margin-top: 8px;
        overflow: hidden;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--accent-color);
        width: 0%;
        transition: width 0.3s ease;
      }

      /* --- 3D Scene --- */
      .card-scene {
        perspective: 1000px;
        width: var(--card-width);
        height: var(--card-height);
        cursor: pointer;
        margin-bottom: 30px;
      }

      .card {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
      }

      .card.is-flipped {
        transform: rotateY(180deg);
      }

      /* --- Card Faces --- */
      .card-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 40px;
        box-sizing: border-box;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        font-size: 1.3rem;
        text-align: center;
        line-height: 1.5;
      }

      /* FRONT */
      .card-front {
        background: #ffffff;
        color: #2d3436;
        border: 1px solid #e1e1e1;
      }

      .card-label {
        position: absolute;
        top: 20px;
        left: 25px;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: #b2bec3;
        font-weight: 700;
      }

      .hint-text {
        position: absolute;
        bottom: 20px;
        font-size: 0.85rem;
        color: #b2bec3;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* BACK */
      .card-back {
        background: #ffffff;
        color: var(--primary-color);
        transform: rotateY(180deg);
        border-bottom: 6px solid var(--accent-color);
        border-top: 1px solid #eee;
        border-left: 1px solid #eee;
        border-right: 1px solid #eee;
      }

      /* --- Controls --- */
      .controls-area {
        display: flex;
        gap: 20px;
        width: 100%;
        justify-content: center;
      }

      .nav-btn {
        padding: 12px 30px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .nav-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        background: #34495e;
      }

      .nav-btn:active {
        transform: scale(0.98);
      }

      .kb-hint {
        font-size: 0.9rem;
        color: #95a5a6;
        margin-top: 25px;
        font-family: monospace;
      }

      /* --- Mobile Responsiveness --- */
      @media (max-width: 600px) {
        .card-scene {
          width: 90vw;
          height: 400px;
        }
        .card-face {
          padding: 25px;
          font-size: 1.1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="flashcard-wrapper">
      <div class="progress-container">
        <span id="progress-text">Card 1 / 20</span>
        <div class="progress-bar-bg">
          <div id="progress-fill" class="progress-bar-fill"></div>
        </div>
      </div>

      <div class="card-scene">
        <div class="card" id="flashcard" onclick="flipCard()">
          <div class="card-face card-front">
            <span class="card-label">Question</span>
            <div class="card-content" id="card-front-text"></div>
            <div class="hint-text">↻ Tap to flip</div>
          </div>

          <div class="card-face card-back">
            <span class="card-label">Answer</span>
            <div class="card-content" id="card-back-text"></div>
          </div>
        </div>
      </div>

      <div class="controls-area">
        <button class="nav-btn" onclick="prevCard()">← Prev</button>
        <button class="nav-btn" onclick="nextCard()">Next →</button>
      </div>

      <p class="kb-hint">Spacebar: Flip &nbsp;•&nbsp; Arrows: Navigate</p>
    </div>

    <script>
      // 1. DATA (From your marche.md request)
      const flashcardData = [
        // Level 1: Simple Recognition (1-5)
        {
          q: "Qu'est-ce qu'un marché en plein air ?",
          a: "C'est un lieu où on vend des produits frais en plein air.",
        },
        {
          q: "Qu'est-ce qu'on trouve au marché ?",
          a: "Des fruits, des légumes, du pain, du poisson et de la viande.",
        },
        {
          q: "Qui vend les produits au marché ?",
          a: "Les vendeurs et les vendeuses.",
        },
        {
          q: "Qu'est-ce qu'un stand ?",
          a: "C'est l'emplacement où le vendeur expose ses produits.",
        },
        {
          q: "Qu'est-ce qu'un auvent ?",
          a: "C'est une toile qui protège le stand du soleil et de la pluie.",
        },

        // Level 2: Basic Phrases (6-10)
        {
          q: "Comment demander le prix ?",
          a: "Combien coûtent les tomates ? ou C'est combien le kilo ?",
        },
        {
          q: "Que dit le client pour acheter ?",
          a: "Je voudrais un kilo de pommes, s'il vous plaît.",
        },
        {
          q: "Comment payer au marché ?",
          a: "On peut payer en espèces ou par carte.",
        },
        {
          q: "Quand a lieu le marché ?",
          a: "Le marché a lieu tous les samedis matin.",
        },
        {
          q: "Comment sont les produits au marché ?",
          a: "Ils sont frais, locaux et de saison.",
        },

        // Level 3: Contextual Usage (11-15)
        {
          q: "Que fait le vendeur quand un client achète des fruits ?",
          a: "Il pèse les fruits et annonce le prix.",
        },
        {
          q: "Décrivez l'ambiance du marché.",
          a: "L'ambiance est animée, conviviale et colorée.",
        },
        {
          q: "Pourquoi les gens préfèrent acheter au marché ?",
          a: "Parce que les produits sont plus frais et on peut parler avec les producteurs.",
        },
        {
          q: "Que font les vendeurs tôt le matin ?",
          a: "Ils installent leurs stands et disposent les produits dans des cageots.",
        },
        {
          q: "Comment savoir si un produit est frai s?",
          a: "On regarde la couleur, on touche et on sent le produit.",
        },

        // Level 4: Complex Interactions (16-20)
        {
          q: "Quelle est la différence entre un marché et un supermarché ?",
          a: "Au marché, les produits sont plus frais, souvent locaux, et on a un contact direct avec les vendeurs. L'ambiance est plus conviviale.",
        },
        {
          q: "Comment négocier poliment au marché ?",
          a: "On peut demander: 'C'est votre meilleur prix ?' ou 'Vous faites une petite remise si j'en prends deux kilos ?'",
        },
        {
          q: "Expliquez le rôle du poissonnier au marché.",
          a: "Le poissonnier vend du poisson fraîchement pêché. Il le prépare, le nettoie et conseille les clients sur la cuisson.",
        },
        {
          q: "Pourquoi dit-on que les marchés créent du lien social ?",
          a: "Parce qu'on discute avec les vendeurs, on échange des recettes, et on retrouve les mêmes personnes chaque semaine. C'est un moment de convivialité.",
        },
        {
          q: "Comparez l'expérience d'achat au marché avec celle en ligne.",
          a: "Au marché, on peut voir, toucher et sentir les produits. On parle directement avec le producteur et on découvre des produits de saison. En ligne, c'est plus rapide mais moins personnel et on ne peut pas vérifier la qualité.",
        },
      ];

      // 2. STATE MANAGEMENT
      let currentIndex = 0;

      // 3. DOM ELEMENTS
      const cardElement = document.getElementById("flashcard");
      const frontText = document.getElementById("card-front-text");
      const backText = document.getElementById("card-back-text");
      const progressText = document.getElementById("progress-text");
      const progressFill = document.getElementById("progress-fill");

      // 4. INITIALIZATION
      function init() {
        loadCard(currentIndex);
      }

      // 5. CORE LOGIC
      function loadCard(index) {
        // Bounds check
        if (index < 0) index = 0;
        if (index >= flashcardData.length) index = flashcardData.length - 1;

        currentIndex = index;

        // Reset Flip State (Ensure we show question first)
        cardElement.classList.remove("is-flipped");

        // Small delay to allow flip animation to reset before changing text
        setTimeout(() => {
          const item = flashcardData[currentIndex];
          frontText.innerText = item.q;
          backText.innerText = item.a;
          updateProgress();
        }, 200);
      }

      function flipCard() {
        cardElement.classList.toggle("is-flipped");
      }

      function nextCard() {
        if (currentIndex < flashcardData.length - 1) {
          loadCard(currentIndex + 1);
        } else {
          // Flash visual cue for end of deck
          progressText.style.color = "red";
          setTimeout(() => (progressText.style.color = "#666"), 500);
        }
      }

      function prevCard() {
        if (currentIndex > 0) {
          loadCard(currentIndex - 1);
        }
      }

      function updateProgress() {
        const current = currentIndex + 1;
        const total = flashcardData.length;
        progressText.innerText = `Card ${current} / ${total}`;

        const percentage = (current / total) * 100;
        progressFill.style.width = `${percentage}%`;
      }

      // 6. KEYBOARD CONTROLS
      document.addEventListener("keydown", (e) => {
        if (e.code === "Space") {
          e.preventDefault(); // Stop scrolling
          flipCard();
        } else if (e.code === "ArrowRight") {
          nextCard();
        } else if (e.code === "ArrowLeft") {
          prevCard();
        }
      });

      // Run Logic
      init();
    </script>
  </body>
</html>
