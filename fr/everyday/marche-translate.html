<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Translation Quiz - Le Marché</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CHXHM9CZKM"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-CHXHM9CZKM");
    </script>

    <!-- Favicons -->
    <link href="/img/favicon.png" rel="icon" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="../../assets/css/translation.css" />
  </head>
  <body>
    <div class="translation-card">
      <h2>✍️ Translation Challenge</h2>
      <p class="subtitle">
        Translate the sentences into French. (Watch your spelling!)
      </p>

      <div id="quiz-area">
        <div class="question-block" id="block-1">
          <span class="english-prompt">1. I'm going to the market.</span>
          <input
            type="text"
            class="user-input"
            id="q1"
            placeholder="Type here..."
          />
          <div class="feedback-msg" id="msg-1"></div>
        </div>

        <div class="question-block" id="block-2">
          <span class="english-prompt">2. The vegetables are fresh.</span>
          <input type="text" class="user-input" id="q2" placeholder="..." />
          <div class="feedback-msg" id="msg-2"></div>
        </div>

        <div class="question-block" id="block-3">
          <span class="english-prompt">3. How much does it cost?</span>
          <input type="text" class="user-input" id="q3" placeholder="..." />
          <div class="feedback-msg" id="msg-3"></div>
        </div>

        <div class="question-block" id="block-4">
          <span class="english-prompt"
            >4. I would like a kilo of tomatoes.</span
          >
          <input type="text" class="user-input" id="q4" placeholder="..." />
          <div class="feedback-msg" id="msg-4"></div>
        </div>

        <div class="question-block" id="block-5">
          <span class="english-prompt">5. The seller is selling bread.</span>
          <input type="text" class="user-input" id="q5" placeholder="..." />
          <div class="feedback-msg" id="msg-5"></div>
        </div>

        <div class="question-block" id="block-6">
          <span class="english-prompt">6. It's too expensive.</span>
          <input type="text" class="user-input" id="q6" placeholder="..." />
          <div class="feedback-msg" id="msg-6"></div>
        </div>

        <div class="question-block" id="block-7">
          <span class="english-prompt">7. I'll take some carrots.</span>
          <input type="text" class="user-input" id="q7" placeholder="..." />
          <div class="feedback-msg" id="msg-7"></div>
        </div>

        <div class="question-block" id="block-8">
          <span class="english-prompt">8. The cheese is delicious.</span>
          <input type="text" class="user-input" id="q8" placeholder="..." />
          <div class="feedback-msg" id="msg-8"></div>
        </div>

        <div class="question-block" id="block-9">
          <span class="english-prompt">9. Is it organic?</span>
          <input type="text" class="user-input" id="q9" placeholder="..." />
          <div class="feedback-msg" id="msg-9"></div>
        </div>

        <div class="question-block" id="block-10">
          <span class="english-prompt">10. A woman is buying fruit.</span>
          <input type="text" class="user-input" id="q10" placeholder="..." />
          <div class="feedback-msg" id="msg-10"></div>
        </div>

        <div class="question-block" id="block-11">
          <span class="english-prompt">11. Give me a baguette, please.</span>
          <input type="text" class="user-input" id="q11" placeholder="..." />
          <div class="feedback-msg" id="msg-11"></div>
        </div>

        <div class="question-block" id="block-12">
          <span class="english-prompt"
            >12. The customer is carrying a basket.</span
          >
          <input type="text" class="user-input" id="q12" placeholder="..." />
          <div class="feedback-msg" id="msg-12"></div>
        </div>

        <div class="question-block" id="block-13">
          <span class="english-prompt">13. Is it ripe?</span>
          <input type="text" class="user-input" id="q13" placeholder="..." />
          <div class="feedback-msg" id="msg-13"></div>
        </div>

        <div class="question-block" id="block-14">
          <span class="english-prompt">14. I'm looking for fresh herbs.</span>
          <input type="text" class="user-input" id="q14" placeholder="..." />
          <div class="feedback-msg" id="msg-14"></div>
        </div>

        <div class="question-block" id="block-15">
          <span class="english-prompt">15. Do you have change?</span>
          <input type="text" class="user-input" id="q15" placeholder="..." />
          <div class="feedback-msg" id="msg-15"></div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-verify" onclick="checkTranslations()">
          Check Answers
        </button>
        <button class="btn-reset" onclick="resetTranslations()">Reset</button>
      </div>
    </div>

    <script>
      // The Answer Key (Supports multiple correct variations)
      const answerKey = {
        q1: ["Je vais au marché"],
        q2: ["Les légumes sont frais"],
        q3: ["Combien ça coûte", "C'est combien", "Quel est le prix"],
        q4: ["Je voudrais un kilo de tomates"],
        q5: ["Le vendeur vend du pain", "La vendeuse vend du pain"],
        q6: ["C'est trop cher"],
        q7: ["Je prends des carottes"],
        q8: ["Le fromage est délicieux"],
        q9: ["C'est bio", "Est-ce que c'est bio"],
        q10: ["Une femme achète des fruits"],
        q11: [
          "Donnez-moi une baguette, s'il vous plaît",
          "Donnez-moi une baguette s'il vous plaît",
        ],
        q12: ["Le client porte un panier", "La cliente porte un panier"],
        q13: ["C'est mûr", "Est-ce que c'est mûr"],
        q14: ["Je cherche des herbes fraîches"],
        q15: [
          "Vous avez de la monnaie",
          "Est-ce que vous avez de la monnaie",
          "Avez-vous de la monnaie",
        ],
      };

      function checkTranslations() {
        // Loop through each question ID
        for (let i = 1; i <= 15; i++) {
          const inputId = "q" + i;
          const blockId = "block-" + i;
          const msgId = "msg-" + i;

          const inputEl = document.getElementById(inputId);
          const blockEl = document.getElementById(blockId);
          const msgEl = document.getElementById(msgId);

          // Normalize user input: Lowercase, remove extra spaces, remove punctuation at end
          let userVal = inputEl.value.trim().toLowerCase();
          if (userVal.endsWith(".")) userVal = userVal.slice(0, -1);
          if (userVal.endsWith("?")) userVal = userVal.slice(0, -1);

          // Get valid answers for this question
          const validAnswers = answerKey[inputId].map((a) => a.toLowerCase());

          // Check if user input matches ANY valid answer
          let isCorrect = false;
          for (let ans of validAnswers) {
            if (userVal === ans) isCorrect = true;
          }

          // UI Updates
          if (isCorrect) {
            blockEl.classList.add("correct-block");
            blockEl.classList.remove("wrong-block");
            msgEl.style.display = "block";
            msgEl.style.color = "#27ae60";
            msgEl.innerText = "✅ Correct!";
          } else {
            blockEl.classList.add("wrong-block");
            blockEl.classList.remove("correct-block");
            msgEl.style.display = "block";
            msgEl.style.color = "#c0392b";
            // Show the first valid answer as the correction
            msgEl.innerText = `❌ Correction: "${answerKey[inputId][0]}"`;
          }
        }
      }

      function resetTranslations() {
        for (let i = 1; i <= 15; i++) {
          const inputEl = document.getElementById("q" + i);
          const blockEl = document.getElementById("block-" + i);
          const msgEl = document.getElementById("msg-" + i);

          inputEl.value = "";
          blockEl.classList.remove("correct-block", "wrong-block");
          msgEl.style.display = "none";
        }
      }
    </script>
    <script type="module" src="../../assets/js/nav-utensils.js"></script>
  </body>
</html>
