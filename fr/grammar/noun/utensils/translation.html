<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Translation Quiz</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CHXHM9CZKM"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-CHXHM9CZKM");
    </script>

    <!-- Favicons -->
    <link href="/img/favicon.png" rel="icon" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="../../../../assets/css/translation.css" />
  </head>
  <body>
    <div class="translation-card">
      <h2>✍️ Translation Challenge</h2>
      <p class="subtitle">
        Translate the sentences into French. (Watch your spelling!)
      </p>

      <div id="quiz-area">
        <div class="question-block" id="block-1">
          <span class="english-prompt">1. I cut the steak with a knife.</span>
          <input
            type="text"
            class="user-input"
            id="q1"
            placeholder="Type here..."
          />
          <div class="feedback-msg" id="msg-1"></div>
        </div>

        <div class="question-block" id="block-2">
          <span class="english-prompt">2. The blade is sharp.</span>
          <input type="text" class="user-input" id="q2" placeholder="..." />
          <div class="feedback-msg" id="msg-2"></div>
        </div>

        <div class="question-block" id="block-3">
          <span class="english-prompt">3. Use the fork to pierce.</span>
          <input type="text" class="user-input" id="q3" placeholder="..." />
          <div class="feedback-msg" id="msg-3"></div>
        </div>

        <div class="question-block" id="block-4">
          <span class="english-prompt">4. I spread the butter.</span>
          <input type="text" class="user-input" id="q4" placeholder="..." />
          <div class="feedback-msg" id="msg-4"></div>
        </div>

        <div class="question-block" id="block-5">
          <span class="english-prompt">5. The handle is made of wood.</span>
          <input type="text" class="user-input" id="q5" placeholder="..." />
          <div class="feedback-msg" id="msg-5"></div>
        </div>

        <div class="question-block" id="block-6">
          <span class="english-prompt">6. Cut it in half like this.</span>
          <input type="text" class="user-input" id="q6" placeholder="..." />
          <div class="feedback-msg" id="msg-6"></div>
        </div>

        <div class="question-block" id="block-7">
          <span class="english-prompt"
            >7. Use a bread knife to cut the bread.</span
          >
          <input type="text" class="user-input" id="q7" placeholder="..." />
          <div class="feedback-msg" id="msg-7"></div>
        </div>

        <div class="question-block" id="block-8">
          <span class="english-prompt"
            >8. People eat sushi with chopsticks.</span
          >
          <input type="text" class="user-input" id="q8" placeholder="..." />
          <div class="feedback-msg" id="msg-8"></div>
        </div>

        <div class="question-block" id="block-9">
          <span class="english-prompt">9. Peel the potatoes.</span>
          <input type="text" class="user-input" id="q9" placeholder="..." />
          <div class="feedback-msg" id="msg-9"></div>
        </div>

        <div class="question-block" id="block-10">
          <span class="english-prompt"
            >10. A tablespoon of salt will be too much.</span
          >
          <input type="text" class="user-input" id="q10" placeholder="..." />
          <div class="feedback-msg" id="msg-10"></div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-verify" onclick="checkTranslations()">
          Check Answers
        </button>
        <button class="btn-reset" onclick="resetTranslations()">Reset</button>
      </div>
    </div>

    <script>
      // The Answer Key (Supports multiple correct variations separated by | )
      const answerKey = {
        q1: [
          "Je coupe le steak avec un couteau",
          "Je coupe le steak avec le couteau",
        ],
        q2: [
          "La lame est coupante",
          "La lame est aiguisée",
          "La lame est tranchante",
        ],
        q3: [
          "Utilise la fourchette pour piquer",
          "Utilisez la fourchette pour piquer",
        ],
        q4: ["Je tartine le beurre", "J'étale le beurre"],
        q5: ["Le manche est en bois", "Le manche est fait de bois"],
        q6: ["Coupe-le en deux comme ça"],
        q7: ["Utilise un couteau à pain pour couper le pain"],
        q8: [
          "On mange les sushis avec des baguettes",
          "Les gens mangent les sushis avec des baguettes",
          "Les sushis se mangent avec des baguettes",
        ],
        q9: ["Épluche les pommes de terre", "Pelez les pommes de terre"],
        q10: [
          "Une cuillère à soupe de sel sera trop",
          "Une cuillère à soupe de sel, ce sera trop",
        ],
      };

      function checkTranslations() {
        // Loop through each question ID
        for (let i = 1; i <= 10; i++) {
          const inputId = "q" + i;
          const blockId = "block-" + i;
          const msgId = "msg-" + i;

          const inputEl = document.getElementById(inputId);
          const blockEl = document.getElementById(blockId);
          const msgEl = document.getElementById(msgId);

          // Normalize user input: Lowercase, remove extra spaces, remove punctuation at end
          let userVal = inputEl.value.trim().toLowerCase();
          if (userVal.endsWith(".")) userVal = userVal.slice(0, -1); // Remove trailing dot

          // Clean up accents for flexible matching (Optional, but nice to have)
          // For strict mode, remove the next line.
          // userVal = userVal.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

          // Get valid answers for this question
          const validAnswers = answerKey[inputId].map((a) => a.toLowerCase());

          // Check if user input matches ANY valid answer
          // Note: If you removed accent stripping above, ensure inputs match exactly.
          // Here we do a somewhat strict check but allow case insensitivity.

          let isCorrect = false;
          // Check against normalized answers
          for (let ans of validAnswers) {
            if (userVal === ans) isCorrect = true;
          }

          // UI Updates
          if (isCorrect) {
            blockEl.classList.add("correct-block");
            blockEl.classList.remove("wrong-block");
            msgEl.style.display = "block";
            msgEl.style.color = "#27ae60";
            msgEl.innerText = "✅ Correct!";
          } else {
            blockEl.classList.add("wrong-block");
            blockEl.classList.remove("correct-block");
            msgEl.style.display = "block";
            msgEl.style.color = "#c0392b";
            // Show the first valid answer as the correction
            msgEl.innerText = `❌ Correction: "${answerKey[inputId][0]}"`;
          }
        }
      }

      function resetTranslations() {
        for (let i = 1; i <= 10; i++) {
          const inputEl = document.getElementById("q" + i);
          const blockEl = document.getElementById("block-" + i);
          const msgEl = document.getElementById("msg-" + i);

          inputEl.value = "";
          blockEl.classList.remove("correct-block", "wrong-block");
          msgEl.style.display = "none";
        }
      }
    </script>
    <script type="module" src="../../../../assets/js/nav-utensils.js"></script>
  </body>
</html>
