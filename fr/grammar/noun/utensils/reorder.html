<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Sentence Scramble: Table Manners</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CHXHM9CZKM"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-CHXHM9CZKM");
    </script>

    <!-- Favicons -->
    <link href="/img/favicon.png" rel="icon" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="../../../../assets/css/reorder.css" />
  </head>
  <body>
    <div class="scramble-container">
      <h2>üß© Reorder the Sentences</h2>
      <p class="text-center text-muted mb-5">
        Click words to build the sentence. Capital letters start the sentence!
      </p>

      <div id="exercises-area"></div>

      <div class="controls">
        <button class="btn-verify" onclick="checkAll()">Check Answers</button>
        <button class="btn-reset" onclick="resetAll()">Reset</button>
      </div>
    </div>

    <script>
      // 1. The Data: 10 Simple Sentences using your vocabulary
      const sentences = [
        "Je mange avec une fourchette",
        "Le couteau coupe la viande",
        "La soupe est tr√®s chaude",
        "Je tartine le beurre",
        "La lame est tr√®s coupante",
        "Passe-moi le sel s'il te pla√Æt",
        "Les baguettes sont en bois",
        "Il tient son couteau fermement",
        "Elle utilise une petite cuill√®re",
        "Les couverts sont sur la table",
      ];

      const container = document.getElementById("exercises-area");

      // 2. Init: Render the DOM
      function init() {
        container.innerHTML = ""; // Clear
        sentences.forEach((sentence, index) => {
          createExerciseRow(sentence, index);
        });
      }

      function createExerciseRow(sentence, index) {
        // Create HTML structure
        const row = document.createElement("div");
        row.className = "exercise-row";

        // Prepare words
        const words = sentence.split(" ");
        const shuffled = [...words].sort(() => 0.5 - Math.random()); // Shuffle

        // HTML Template
        row.innerHTML = `
            <div class="prompt">Exercise ${index + 1}</div>
            <div class="sentence-line" id="line-${index}" onclick="moveWordBack(event, ${index})"></div>
            <div class="word-bank" id="bank-${index}">
                </div>
            <div class="feedback-text" id="fb-${index}"></div>
        `;

        container.appendChild(row);

        // Inject Buttons into the Bank
        const bank = document.getElementById(`bank-${index}`);
        shuffled.forEach((word) => {
          const btn = document.createElement("div");
          btn.className = "word-chip";
          btn.innerText = word;
          btn.onclick = function () {
            moveWordToLine(this, index);
          };
          bank.appendChild(btn);
        });
      }

      // 3. Logic: Moving Words
      function moveWordToLine(element, index) {
        const line = document.getElementById(`line-${index}`);
        line.appendChild(element); // Moves DOM element from Bank to Line
      }

      function moveWordBack(event, index) {
        // Only move if clicking the word chip, not the gray box itself
        if (event.target.classList.contains("word-chip")) {
          const bank = document.getElementById(`bank-${index}`);
          bank.appendChild(event.target); // Moves DOM element back to Bank
        }
      }

      // 4. Check Logic
      function checkAll() {
        sentences.forEach((correctSentence, index) => {
          const line = document.getElementById(`line-${index}`);
          const fb = document.getElementById(`fb-${index}`);

          // Get user's current order
          // We use Array.from to map the children divs to their text content
          const userWords = Array.from(line.children).map(
            (chip) => chip.innerText,
          );
          const userSentence = userWords.join(" ");

          // Validation
          if (userSentence === correctSentence) {
            line.classList.add("correct-line");
            line.classList.remove("wrong-line");
            fb.style.display = "block";
            fb.style.color = "#27ae60";
            fb.innerText = "‚úÖ Correct";
          } else {
            line.classList.add("wrong-line");
            line.classList.remove("correct-line");
            fb.style.display = "block";
            fb.style.color = "#c0392b";
            fb.innerText = "‚ùå Incorrect order";
          }
        });
      }

      // 5. Reset Logic
      function resetAll() {
        init(); // Just re-render everything from scratch
      }

      // Start
      init();
    </script>
    <script type="module" src="../../../../assets/js/nav-utensils.js"></script>
  </body>
</html>
