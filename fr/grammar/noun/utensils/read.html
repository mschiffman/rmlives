<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Reading Comprehension</title>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CHXHM9CZKM"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-CHXHM9CZKM");
    </script>

    <!-- Favicons -->
    <link href="/img/favicon.png" rel="icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: #f0f2f5;
        display: flex;
        justify-content: center;
        padding: 20px;
      }

      .reading-card {
        background: white;
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        max-width: 700px;
        width: 100%;
      }

      h2 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 20px;
      }

      /* The Story Box */
      .story-container {
        background-color: #fff8e1; /* Pale yellow like paper */
        padding: 25px;
        border-radius: 12px;
        border-left: 5px solid #f1c40f;
        margin-bottom: 25px;
        position: relative;
      }

      .story-text {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #34495e;
        margin-bottom: 15px;
      }

      .translation-text {
        font-size: 1rem;
        color: #7f8c8d;
        font-style: italic;
        display: none; /* Hidden by default */
        padding-top: 15px;
        border-top: 1px dashed #dcdcdc;
      }

      .toggle-btn {
        background: none;
        border: none;
        color: #3498db;
        font-size: 0.9rem;
        cursor: pointer;
        text-decoration: underline;
        padding: 0;
      }

      /* The Questions */
      .question-block {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }

      .question-title {
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 15px;
        display: block;
      }

      /* Interactive Options (Radio Replacements) */
      .options-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .option-card {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 12px;
        cursor: pointer;
        transition: all 0.2s;
        text-align: center;
        color: #555;
      }

      .option-card:hover {
        border-color: #3498db;
        background: #ebf5fb;
      }

      .option-card.selected {
        border-color: #3498db;
        background: #3498db;
        color: white;
        font-weight: bold;
      }

      /* Feedback States */
      .option-card.correct {
        border-color: #27ae60 !important;
        background: #27ae60 !important;
        color: white !important;
      }

      .option-card.wrong {
        border-color: #e74c3c !important;
        background: #fadbd8 !important; /* Light red bg */
        color: #c0392b !important; /* Dark red text */
        opacity: 0.7;
      }

      .feedback-msg {
        font-size: 0.9rem;
        margin-top: 8px;
        font-weight: bold;
        display: none;
      }

      /* Controls */
      .controls {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      button.action-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
      }

      .btn-verify {
        background: #2ecc71;
        color: white;
      }
      .btn-verify:hover {
        background: #27ae60;
      }
      .btn-reset {
        background: #95a5a6;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="reading-card">
      <h2>üìñ Reading: Le D√Æner de Sophie</h2>

      <div class="story-container">
        <div class="story-text">
          Ce soir, Sophie a tr√®s faim. Elle met la table dans la cuisine. √Ä
          gauche de l'assiette, elle pose sa <strong>fourchette</strong>. √Ä
          droite, elle place un <strong>couteau</strong>. <br /><br />
          Sophie fait attention car la lame est tr√®s <strong>aiguis√©e</strong>.
          Elle utilise le couteau pour couper son steak et tartiner le beurre
          sur le pain. Son fr√®re, Marc, n'aime pas les fourchettes. Il mange
          avec des <strong>baguettes</strong> en bois !
        </div>

        <button class="toggle-btn" onclick="toggleTrans()">
          üëÅÔ∏è Show/Hide English Translation
        </button>

        <div class="translation-text" id="trans-box">
          Tonight, Sophie is very hungry. She sets the table in the kitchen. To
          the left of the plate, she puts her fork. To the right, she places a
          knife.
          <br /><br />
          Sophie is careful because the blade is very sharp. She uses the knife
          to cut her steak and spread butter on the bread. Her brother, Marc,
          doesn't like forks. He eats with wooden chopsticks!
        </div>
      </div>

      <div id="quiz-area">
        <div class="question-block" data-correct="2">
          <span class="question-title"
            >1. O√π Sophie place-t-elle le couteau ?</span
          >
          <div class="options-grid">
            <div class="option-card" onclick="selectOpt(this, 1, 1)">
              √Ä gauche
            </div>
            <div class="option-card" onclick="selectOpt(this, 1, 2)">
              √Ä droite
            </div>
          </div>
          <div class="feedback-msg" id="fb-1"></div>
        </div>

        <div class="question-block" data-correct="1">
          <span class="question-title"
            >2. Pourquoi fait-elle attention au couteau ?</span
          >
          <div class="options-grid">
            <div class="option-card" onclick="selectOpt(this, 2, 1)">
              La lame est aiguis√©e
            </div>
            <div class="option-card" onclick="selectOpt(this, 2, 2)">
              Le manche est sale
            </div>
          </div>
          <div class="feedback-msg" id="fb-2"></div>
        </div>

        <div class="question-block" data-correct="2">
          <span class="question-title">3. Avec quoi mange Marc ?</span>
          <div class="options-grid">
            <div class="option-card" onclick="selectOpt(this, 3, 1)">
              Une cuill√®re
            </div>
            <div class="option-card" onclick="selectOpt(this, 3, 2)">
              Des baguettes
            </div>
          </div>
          <div class="feedback-msg" id="fb-3"></div>
        </div>
      </div>

      <div class="controls">
        <button class="action-btn btn-verify" onclick="checkReading()">
          Check Answers
        </button>
        <button class="action-btn btn-reset" onclick="resetReading()">
          Reset
        </button>
      </div>
    </div>

    <script>
      // State to track user selections: { questionId: selectedOptionId }
      let userAnswers = {};

      function toggleTrans() {
        const box = document.getElementById("trans-box");
        box.style.display = box.style.display === "block" ? "none" : "block";
      }

      function selectOpt(element, questionId, optionId) {
        // 1. Deselect all others in this question group
        const parent = element.parentElement;
        const siblings = parent.getElementsByClassName("option-card");
        for (let sib of siblings) {
          sib.classList.remove("selected", "correct", "wrong");
        }

        // 2. Select this one
        element.classList.add("selected");

        // 3. Save state
        userAnswers[questionId] = optionId;

        // Clear feedback message if they change mind
        document.getElementById(`fb-${questionId}`).style.display = "none";
      }

      function checkReading() {
        const questions = document.querySelectorAll(".question-block");

        questions.forEach((qBlock, index) => {
          const qId = index + 1;
          const correctOptId = parseInt(qBlock.getAttribute("data-correct"));
          const userOptId = userAnswers[qId];
          const feedbackEl = document.getElementById(`fb-${qId}`);

          // Find the selected element to style it
          const options = qBlock.querySelectorAll(".option-card");

          if (!userOptId) {
            feedbackEl.innerText = "Please select an answer.";
            feedbackEl.style.color = "#f39c12";
            feedbackEl.style.display = "block";
            return;
          }

          // Find the specific DOM element selected
          let selectedEl;
          options.forEach((opt, i) => {
            if (i + 1 === userOptId) selectedEl = opt;
          });

          if (userOptId === correctOptId) {
            selectedEl.classList.add("correct");
            feedbackEl.innerText = "‚úÖ Correct !";
            feedbackEl.style.color = "#27ae60";
          } else {
            selectedEl.classList.add("wrong");
            feedbackEl.innerText = "‚ùå Incorrect.";
            feedbackEl.style.color = "#c0392b";
          }
          feedbackEl.style.display = "block";
        });
      }

      function resetReading() {
        userAnswers = {};
        const allOpts = document.querySelectorAll(".option-card");
        allOpts.forEach((opt) =>
          opt.classList.remove("selected", "correct", "wrong"),
        );

        const allMsgs = document.querySelectorAll(".feedback-msg");
        allMsgs.forEach((msg) => (msg.style.display = "none"));

        document.getElementById("trans-box").style.display = "none";
      }
    </script>
    <script type="module" src="../../../../assets/js/nav-utensils.js"></script>
  </body>
</html>
